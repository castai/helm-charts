# Placeholder defaults for Autoscaler profile.
# TODO: tune ALL these values for production autoscaler rollout.

agent:
  enabled: true
  replicaCount: 2
  apiKeySecretRef: castai-credentials
  createNamespace: false

spot-handler:
  enabled: true
  apiKeySecretRef: castai-credentials
  castai:
    # Optional: can be inherited from global.castai.provider with alias mapping
    # in spot-handler (eks->aws, aks->azure, gke->gcp).
    provider: ""
    clusterIdConfigMapKeyRef:
      name: castai-agent-metadata
      key: CLUSTER_ID

cluster-controller:
  enabled: true
  castai:
    apiKeySecretRef: castai-credentials
  envFrom:
    - configMapRef:
        name: castai-agent-metadata
  autoscaling:
    enabled: true

workload-autoscaler:
  enabled: true
  fullnameOverride: castai-workload-autoscaler
  castai:
    apiKeySecretRef: castai-credentials
    configMapRef: castai-agent-metadata

# castai-live is not part of the autoscaler onboarding; enable manually if needed.
live:
  enabled: false

# castai-pod-mutator is not part of the autoscaler onboarding; enable manually if needed.
pod-mutator:
  enabled: false

pod-pinner:
  enabled: true
  replicaCount: 0
  castai:
    apiKeySecretRef: castai-credentials
  envFrom:
    - configMapRef:
        name: castai-agent-metadata

workload-autoscaler-exporter:
  enabled: true
  castai:
    apiKeySecretRef: castai-credentials
    configMapRef: castai-agent-metadata

evictor:
  enabled: true
  replicaCount: 1
  aggressiveMode: false
  overrideEnvFrom: true
  envFrom:
    - secretRef:
        name: castai-credentials
    - configMapRef:
        name: castai-agent-metadata

metrics-server:
  enabled: false
