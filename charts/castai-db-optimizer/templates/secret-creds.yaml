{{- if and .Values.pooling .Values.pooling.enabled (not .Values.pooling.credentialsSecretRef) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "name" . }}-pooling-credentials
  labels:
    {{- include "labels" . | nindent 4 }}
  annotations:
    {{- include "annotations" . | nindent 4 }}
data:
  {{- if .Values.pooling.username }}
  USERNAME: {{ .Values.pooling.username | b64enc | quote }}
  {{- else}}
    {{ required "pooling.username must be provided" $.Values.pooling.username }}
  {{- end }}
  {{- if .Values.pooling.password }}
  PASSWORD: {{ .Values.pooling.password | b64enc | quote }}
  {{- else}}
    {{ required "pooling.password must be provided" $.Values.pooling.password }}
  {{- end }}
{{- end }}
